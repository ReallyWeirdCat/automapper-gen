/*
Code generated by automapper-gen. DO NOT EDIT.
Learn more: https://git.weirdcat.su/weirdcat/automapper-gen
*/

package dtos

import (
	"errors"
	"fmt"
	db "git.weirdcat.su/weirdcat/automapper-gen/example/db"
)

// MapFromUserDB maps from db.UserDB to UserDTO
func (d *UserDTO) MapFromUserDB(src *db.UserDB) error {
	if src == nil {
		return errors.New("source is nil")
	}

	d.ID = src.ID
	d.Username = src.Username
	{
		var err error
		d.Role, err = StrRoleToEnum(src.Role)
		if err != nil {
			return fmt.Errorf("converting field Role: %w", err)
		}
	}
	if src.About != nil {
		d.About = *src.About
	}
	// About: nil pointer will result in zero value
	{
		d.Pets = make([]PetDTO, len(src.Pets))
		for i, item := range src.Pets {
			var err error
			err = d.Pets[i].MapFromPetDB(&item)
			if err != nil {
				return fmt.Errorf("mapping nested field Pets[%d]: %w", i, err)
			}
		}
	}
	if src.FeaturedAchievement != nil {
		var nested AchievementDTO
		var err error
		err = nested.MapFromAchievementDB(src.FeaturedAchievement)
		if err != nil {
			return fmt.Errorf("mapping nested field FeaturedAchievement: %w", err)
		}
		d.FeaturedAchievement = nested
	}
	// FeaturedAchievement: nil pointer will result in zero value
	{
		var err error
		d.Interests, err = StrInterestsToEnums(src.Interests)
		if err != nil {
			return fmt.Errorf("converting field Interests: %w", err)
		}
	}
	if src.Birthday != nil {
		result := TimeToJSString(*src.Birthday)
		d.Birthday = &result
	}
	// Birthday: nil pointer will result in nil
	d.CreatedAt = TimeToJSString(src.CreatedAt)

	return nil
}

// MapFromPetDB maps from db.PetDB to PetDTO
func (d *PetDTO) MapFromPetDB(src *db.PetDB) error {
	if src == nil {
		return errors.New("source is nil")
	}

	d.ID = src.ID
	d.Name = src.Name
	{
		var err error
		d.Interests, err = StrInterestsToEnums(src.Interests)
		if err != nil {
			return fmt.Errorf("converting field Interests: %w", err)
		}
	}
	if src.Birthday != nil {
		result := TimeToJSString(*src.Birthday)
		d.Birthday = &result
	}
	// Birthday: nil pointer will result in nil
	d.CreatedAt = TimeToJSString(src.CreatedAt)

	return nil
}

// MapFromAchievementDB maps from db.AchievementDB to AchievementDTO
func (d *AchievementDTO) MapFromAchievementDB(src *db.AchievementDB) error {
	if src == nil {
		return errors.New("source is nil")
	}

	d.ID = src.ID
	d.Title = src.Title
	d.Description = ToLower(src.Description)

	return nil
}
